<script>
    // Embed the Flask template variable into your JavaScript code
    var graph = {{ graph|tojson|safe }};

    // Create SVG
    var svg = d3.select("#graph").append("svg")
        .attr("width", 800)
        .attr("height", 600);

    var g = svg.append("g");

    // Specify a layout for the nodes
    var nodeLayout = d3.scalePoint()
        .domain(graph.nodes.map(function(d) { return d.account_id; }))
        .range([0, 800]);  // Adjust this range to fit your SVG dimensions

    // Create the nodes
    g.selectAll(".node")
        .data(graph.nodes)
        .enter()
        .append("circle")
        .attr("class", "node")
        .attr("r", 5)
        .attr("cx", function(d) { return nodeLayout(d.account_id); })
        .attr("cy", 300);  // Adjust this value to fit your SVG dimensions

    // Create the edges
    g.selectAll(".edge")
        .data(graph.relationships)
        .enter()
        .append("line")
        .attr("class", "edge")
        .attr("x1", function(d) { return nodeLayout(d.startNode.account_id); })
        .attr("y1", 300)  // Adjust this value to fit your SVG dimensions
        .attr("x2", function(d) { return nodeLayout(d.endNode.account_id); })
        .attr("y2", 300); // Adjust this value to fit your SVG dimensions
</script>
